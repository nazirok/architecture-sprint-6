## Стратегия масштабирования и отказоустойчивости

В качестве стратегии масштабирования оптимальным будет вариант ***горизонатального масштабирования***. Так как:
1. Планируется значительтный рост пользователей и запросов.
2. Запросы можно обрабатывать параллельно. 
3. Сервисы системы можно горизонтально масштабировать.
4. Количество экземпляров сервиса можно будет подстраивать под нагрузку

### Обеспечение надежности 
Для обеспечения надежности выбран паттерн ***Rate Limiting***. Алгоритм ***бакет токенов*** так как это подход хорошо при резких скачках, что актуально для нашего случая и прост.

### Стратегия отказоустойчивости и балансировки

1. У нас очень высокие требования по доступности 99.9%
2. У пользователей с регионов должно быть одинаковое время загрузки страниц

Согласно требованиям оптимальной стартегией отказоустойчивости будет ***Active-Active*** с георезервированием.

В каждой зоне будут независимые кластеры k8s. Так как это снизит сетевую связность между зонами, что положительно повлияет на отзывчивость и производительность экземпляров приложения в каждой зоне. Также исходя из требований нужно чтобы траффик не проходил через балансировщик, поэтому нужно использовать отдельный балансировщик GSLB. Глобальный балансировщик будет выдавать нужные адреса согласно геолокации пользователя, а непосредственно в самих зонах уже будет работать балансировщик k8s.

### Конфигурация базы данных

Так как приложение распределенное по разным регионам то и база данных должна быть распределенной и при этом отказоустойчивой. Для этого используем стандартный шаблон Patroni. Режим репликации асинхронный так это сделает приложение гораздо более отзывчивым. Бэкап каждые 15 минут.

Шардирования пока не будет. Так как требования по RPS не очень большие и объем данных не очень больщой, то на первом этапе лучше посмотьреть в сторону оптимизации запросов к базе. Также можно выделить для каждого микросервиса свою базу данных.